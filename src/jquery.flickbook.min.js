(function(c){function d(a,f){this.el=a;this.$el=c(a);this.opts=f;this._name=b;this.init()}function h(a){var f=a.startEvent.split(" ").sort(),c=a.stopEvent.split(" ").sort(),b=[],d=[],e=0,h=f.length;a:for(;e<h;e++){for(var g=0,i=c.length;g<i;g++)if(f[e]===c[g]){d.push(f[e]);c.splice(g,1);continue a}b.push(f[e])}a.startEvents=b.join(" ");a.stopEvents=c.join(" ");a.stopStartEvents=d.join(" ")}var b="flickbook",e=c.fn.on?"on":"bind";d.prototype.start=function(){var a=this;if(!this.playing)this.to=setInterval(function(){a.index=
(a.index+1)%a.imageCount;a.showImage()},this.opts.speed),this.playing=!0};d.prototype.stop=function(){if(this.playing){clearInterval(this.to);if("reset"===this.opts.onStop)this.index=0;this.showImage();this.playing=!1}};d.prototype.showImage=function(){for(var a=0;!this.images[this.index]&&a<this.imageCount;)this.index=(this.index+1)%this.imageCount,a++;this.$el.attr("src",this.images[this.index])};d.prototype.playing=!1;d.prototype.index=-1;d.prototype.init=function(){var a=this;this.images=this.$el.data(b+
"-images")||this.opts.images.slice();if(!c.isArray(this.images))this.images=this.images.split(",");this.imageCount=this.images.length;this.fetchImages();this.$el.data(b+"-images",this.images);this.$el[e]("start."+b,c.proxy(this,"start"))[e]("stop."+b,c.proxy(this,"stop"))[e](this.opts.stopEvents,function(){a.$el.trigger("stop."+b)})[e](this.opts.startEvents,function(){a.$el.trigger("start."+b)})[e](this.opts.stopStartEvents,function(){a.playing?a.$el.trigger("stop."+b):a.$el.trigger("start."+b)});
this.opts.autoStart&&this.start()};d.prototype.loadImage=function(a,f){var b=this;c('<img src="'+b.imageSrcs[a]+'">').load(function(){b.images[a+f]=b.imageSrcs[a];c.fn.flickbook.fetchedImages[b.imageSrcs[a]]=!0})};d.prototype.fetchImages=function(){var a=0,b=this.$el.attr("src");this.imageSrcs=this.images;this.images=[];this.opts.keepOriginalImage&&b!=this.imageSrcs[0]&&(this.images[0]=b,c.fn.flickbook.fetchedImages[b]=!0,a=1);for(var b=0,d=this.imageSrcs.length;b<d;b++)c.fn.flickbook.fetchedImages[this.imageSrcs[b]]?
this.images[b+a]=this.imageSrcs[b]:this.loadImage(b,a)};c.fn[b]=function(a){a=c.extend({},c.fn[b].defaults,a);if("string"===typeof a.images)a.images=a.images.split(",");else if(!c.isArray(a.images))return;h(a);return this.each(function(){c.data(this,"plugin_"+b)||c.data(this,"plugin_"+b,new d(this,a))})};c.fn[b].fetchedImages={};c.fn[b].defaults={images:null,padImageIntegersBy:0,speed:100,root:"",startEvent:"mouseover",stopEvent:"mouseout",autoStart:!1,onStop:"reset",keepOriginalImage:!0,random:!1}})(jQuery,
window,document);